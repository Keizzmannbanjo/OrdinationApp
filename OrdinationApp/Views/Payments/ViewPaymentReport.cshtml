@model OrdinationApp.ViewModels.PaymentReportViewModel;

<link rel="stylesheet" href="~/yearpicker/yearpicker.css" />
<script src="~/lib/jquery/jquery.min.js"></script>
<script src="~/yearpicker/yearpicker.js"></script>

<section>
    <div class="row">
        <div class="col-8">
            <form method="get">
                <div class="form-group">
                    <label>Select CMC: </label>
                    <select class="form-control" id="cmcName" name="cmcName" asp-items="@Model.cmcList">
                        <option value="" selected>None</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Select Province: </label>
                    <select class="form-control" id="provinceName" name="provinceName" asp-items="@Model.provinceList">
                        <option value="" selected>None</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Select Ordination Year: </label>
                    <input type="number" name="year" id="year" class="form-control yearpicker" value=@DateTime.Now.Year />
                </div>
                <button class="btn btn-success" type="submit">Apply Filters</button>
            </form>
        </div>
        <div class="col-4">
            <a class="btn btn-success float-end" asp-controller="Payments" asp-action="ExportReport">Export To Excel</a>
        </div>
    </div>


    @if (@Model.paymentRecords.Count() > 0)
    {
        <table class="table table-striped">
            <thead>
            <th>Membership ID</th>
            <th>Rank</th>
            <th>Full Name</th>
            <th>Tally No</th>
            <th>Target Rank</th>
            <th>Province</th>
            <th>CMC</th>

            </thead>
            @foreach (var obj in @Model.paymentRecords)
            {
                <tr>
                    <td>@obj.Member.MemberShipId</td>
                    <td>@obj.Member.CurrentRankTitle</td>
                    <td>@obj.Member.Surname @obj.Member.FirstName @obj.Member.Othername</td>
                    <td>@obj.TallyNo</td>
                    <td>@obj.Member.TargetRankTitle</td>
                    <td>@obj.Member.Province.Name</td>
                    <td>@obj.Member.Province.CmcName</td>
                </tr>
            }
        </table>
    }
</section>


<script type="text/javascript">
    $('.yearpicker').yearpicker();
</script>